{{!-- Stats Row --}}
<div class="header-stats">
	{{#each system.abilities as |ability key|}}
	<div class="header-stat">
		<label class="header-stat-label" title="{{#if (eq key 'Soul')}}This stat measures the strength of your Soul Armament. This affects the damage your attacks and Skills deal. It also raises your Physical Potency making your Skills harder to Resist.{{else if (eq key 'Reflex')}}Combat reflexes and evasiveness. Reflexes provides survivability on the battlefield as well as increasing your ability to Dodge.{{else if (eq key 'Grit')}}Physical Durability and Resilience unmatched. You gain additional Health, and an increased Physical Resistance making you harder to overwhelm.{{else if (eq key 'Arcana')}}A visible level of your bodies upper limits for wielding Hexes and otherwise using Mana. This Stat augments the damage and effects Hexes will produce, as well as raising your Magykal Potency, making some Hexes and effects harder to Resist.{{else if (eq key 'Intuition')}}Combat Knowledge and Experience are represented by Intuition. Intuition grants simple but useful abilities.{{else if (eq key 'Will')}}Will grants you incredible determination capable of surmounting the odds and even resisting magykal abilities. This Stat raises your Magykal Resist providing additional defense against certain effects.{{/if}}">{{ability.label}}</label>
		<input type="text" name="system.abilities.{{key}}.value" value="{{ability.value}}"
			data-dtype="Number" class="header-stat-input" />
	</div>
	{{/each}}
</div>

{{!-- Potency & Resist Row --}}
<div class="header-stats potency-row">
	<div class="header-stat">
		<label class="header-stat-label">Physical Potency</label>
		<input type="text" name="system.attributes.physical_potency.value" value="{{system.attributes.physical_potency.value}}"
			data-dtype="Number" class="header-stat-input" />
	</div>
	<div class="fantasy-combat-button-container">
		<span class="fantasy-combat-button resistance-button rollable"
			data-roll="2d6+@abilities.Grit.value+@checks.Physical.mod"
			data-label="Physical Resistance Check">
			<div class="combat-icon-container">
				<img src="systems/stryder/assets/physical_resistance.svg" class="combat-icon" />
				<div class="combat-icon-glow"></div>
			</div>
			<span class="combat-button-text"><strong>Physical Resist</strong></span>
			<div class="combat-button-shine"></div>
		</span>
	</div>
	<div class="header-stat">
		<label class="header-stat-label">Magykal Potency</label>
		<input type="text" name="system.attributes.magykal_potency.value" value="{{system.attributes.magykal_potency.value}}"
			data-dtype="Number" class="header-stat-input" />
	</div>
	<div class="fantasy-combat-button-container">
		<span class="fantasy-combat-button resistance-button rollable"
			data-roll="2d6+@abilities.Will.value+@checks.Magykal.mod"
			data-label="Magykal Resistance Check">
			<div class="combat-icon-container">
				<img src="systems/stryder/assets/magykal_resistance.svg" class="combat-icon" />
				<div class="combat-icon-glow"></div>
			</div>
			<span class="combat-button-text"><strong>Magykal Resist</strong></span>
			<div class="combat-button-shine"></div>
		</span>
	</div>
</div>

<!-- Combined Class & Folk Section -->
<div class="flexrow-stats scrolling-container" style="gap: 8px;">
    <!-- Class (Left Column) -->
    <div class="flexcol-stats scroll-wrapper" style="flex: 1;">
		<ol class='items-list'>
		  <li class='item flexrow items-header'>
			<div class='item-name'>
			  <img src="systems/stryder/assets/class-icon.svg" alt="Class">
			  {{localize 'Class'}}
			</div>
			<div class='item-controls'>
			  <a
				class='item-control'
				title='Browse Classes'
				data-action='compendium'
				data-pack='stryder-classes'
			  >
				<i class='fas fa-search'></i>
			  </a>
			</div>
		  </li>
		  {{#each classchoice as |item id|}}
			<li class='item flexrow' data-item-id='{{item._id}}'>
			  <div class='item-name rollable' data-roll-type='item'>
				<div class='item-image'>
				  <a class='rollable' data-roll-type='item'>
					<img
					  src='{{item.img}}'
					  title='{{item.name}}'
					  width='24'
					  height='24'
					/>
				  </a>
				</div>
				<h4>{{item.name}}</h4>
			  </div>
			  <div class='item-controls'>
				<a
				  class='item-control item-duplicate'
				  title='{{localize "STRYDER.DOCUMENT.Duplicate"}}'
				>
				  <i class='fas fa-copy'></i>
				</a>
				<a
				  class='item-control item-edit'
				  title='{{localize "DOCUMENT.Edit" type='feature'}}'
				  data-action='edit'
				>
				  <i class='fas fa-edit'></i>
				</a>
				<a
				  class='item-control item-delete'
				  title='{{localize "DOCUMENT.Delete" type='feature'}}'
				  data-action='delete'
				>
				  <i class='fas fa-trash'></i>
				</a>
			  </div>
			</li>
		  {{/each}}
		</ol>
    </div>

    <!-- Folk (Right Column) -->
    <div class="flexcol-stats scroll-wrapper" style="flex: 1;">
		<ol class='items-list'>
		  <li class='item flexrow items-header'>
			<div class='item-name'>
			  <img src="systems/stryder/assets/folk-icon.svg" alt="Folk">
			  {{localize 'Folk'}}
			</div>
			<div class='item-controls'>
			  <a
				class='item-control'
				title='Browse Folk'
				data-action='compendium'
				data-pack='stryder-folk'
			  >
				<i class='fas fa-search'></i>
			  </a>
			</div>
		  </li>
		  {{#each folk as |item id|}}
			<li class='item flexrow' data-item-id='{{item._id}}'>
			  <div class='item-name rollable' data-roll-type='item'>
				<div class='item-image'>
				  <a class='rollable' data-roll-type='item'>
					<img
					  src='{{item.img}}'
					  title='{{item.name}}'
					  width='24'
					  height='24'
					/>
				  </a>
				</div>
				<h4>{{item.name}}</h4>
			  </div>
			  <div class='item-controls'>
				<a
				  class='item-control item-duplicate'
				  title='{{localize "STRYDER.DOCUMENT.Duplicate"}}'
				>
				  <i class='fas fa-copy'></i>
				</a>
				<a
				  class='item-control item-edit'
				  title='{{localize "DOCUMENT.Edit" type='feature'}}'
				  data-action='edit'
				>
				  <i class='fas fa-edit'></i>
				</a>
				<a
				  class='item-control item-delete'
				  title='{{localize "DOCUMENT.Delete" type='feature'}}'
				  data-action='delete'
				>
				  <i class='fas fa-trash'></i>
				</a>
			  </div>
			</li>
		  {{/each}}
		</ol>
    </div>
</div>



<ol class='items-list'>
  <li class='item flexrow items-header'>
    <div class='item-name'>{{localize 'Generic Attacks'}}&nbsp<i class='toggle-icon fas fa-chevron-down'></i></div>
    <div class='item-generic-form'>{{localize 'Parent Ability'}}</div>
    <div class='item-controls'>
      <a
        class='item-control item-create'
        title='Create item'
        data-type='generic'
      >
        <i class='fas fa-plus'></i>
        {{localize 'DOCUMENT.New' type=''}}
      </a>
    </div>
  </li>
  {{#each generic as |item id|}}
    <li class='item flexrow' data-item-id='{{item._id}}'>
      <div class='item-name'>
        <div class='item-image'>
          <a class='rollable' data-roll-type='item'>
            <img
              src='{{item.img}}'
              title='{{item.name}}'
              width='24'
              height='24'
            />
          </a>
        </div>
        <h4>{{item.name}}</h4>
        {{#if (gt item.system.limit.max 0)}}
          <span class="item-limit-counter" data-item-id="{{item._id}}">{{item.system.limit.value}}/{{item.system.limit.max}}</span>
        {{/if}}
      </div>
      <div class='item-armament-form item-prop'>{{system.parent_ability}}</div>
      <div class='item-controls'>
        <a
          class='item-control item-duplicate'
          title='{{localize "STRYDER.DOCUMENT.Duplicate"}}'
        >
          <i class='fas fa-copy'></i>
        </a>
        <a
          class='item-control item-edit'
          title='{{localize "DOCUMENT.Edit" type='feature'}}'
        >
          <i class='fas fa-edit'></i>
        </a>
        <a
          class='item-control item-delete'
          title='{{localize "DOCUMENT.Delete" type='feature'}}'
        >
          <i class='fas fa-trash'></i>
        </a>
      </div>
    </li>
  {{/each}}
</ol>
<ol class='items-list'>
  <li class='item flexrow items-header'>
    <div class='item-name'>{{localize 'Actions'}}&nbsp<i class='toggle-icon fas fa-chevron-down'></i></div>
    <div class='item-action-type'>{{localize 'Action'}}</div>
    <div class='item-controls'>
      <a
        class='item-control item-create'
        title='Create item'
        data-type='action'
      >
        <i class='fas fa-plus'></i>
        {{localize 'DOCUMENT.New' type=''}}
      </a>
    </div>
  </li>
  {{#each actions as |item id|}}
    <li class='item flexrow' data-item-id='{{item._id}}'>
      <div class='item-name'>
        <div class='item-image'>
          <a class='rollable' data-roll-type='item'>
            <img
              src='{{item.img}}'
              title='{{item.name}}'
              width='24'
              height='24'
            />
          </a>
        </div>
        <h4>{{item.name}}</h4>
        {{#if (gt item.system.limit.max 0)}}
          <span class="item-limit-counter" data-item-id="{{item._id}}">{{item.system.limit.value}}/{{item.system.limit.max}}</span>
        {{/if}}
      </div>
      <div class='item-action-type item-prop'>{{#if system.action_type}}{{localize (concat "STRYDER.SheetLabels." (capitalize system.action_type))}}{{else}}{{localize "STRYDER.SheetLabels.Focused"}}{{/if}}</div>
      <div class='item-controls'>
        <a
          class='item-control item-duplicate'
          title='{{localize "STRYDER.DOCUMENT.Duplicate"}}'
        >
          <i class='fas fa-copy'></i>
        </a>
        <a
          class='item-control item-edit'
          title='{{localize "DOCUMENT.Edit" type='feature'}}'
        >
          <i class='fas fa-edit'></i>
        </a>
        <a
          class='item-control item-delete'
          title='{{localize "DOCUMENT.Delete" type='feature'}}'
        >
          <i class='fas fa-trash'></i>
        </a>
      </div>
    </li>
  {{/each}}
</ol>

<ol class='items-list'>
  <li class='item flexrow items-header'>
    <div class='item-name'>{{localize 'Class Features'}}&nbsp<i class='toggle-icon fas fa-chevron-down'></i></div>
    <div class='item-controls'>
      <a
        class='item-control item-create'
        title='Create item'
        data-type='feature'
      >
        <i class='fas fa-plus'></i>
        {{localize 'DOCUMENT.New' type=''}}
      </a>
    </div>
  </li>
  {{#each features as |item id|}}
    <li class='item flexrow' data-item-id='{{item._id}}'>
      <div class='item-name'>
        <div class='item-image'>
          <a class='rollable' data-roll-type='item'>
            <img
              src='{{item.img}}'
              title='{{item.name}}'
              width='24'
              height='24'
            />
          </a>
        </div>
        <h4>{{item.name}}</h4>
      </div>
      <div class='item-controls'>
        <a
          class='item-control item-duplicate'
          title='{{localize "STRYDER.DOCUMENT.Duplicate"}}'
        >
          <i class='fas fa-copy'></i>
        </a>
        <a
          class='item-control item-edit'
          title='{{localize "DOCUMENT.Edit" type='feature'}}'
        >
          <i class='fas fa-edit'></i>
        </a>
        <a
          class='item-control item-delete'
          title='{{localize "DOCUMENT.Delete" type='feature'}}'
        >
          <i class='fas fa-trash'></i>
        </a>
      </div>
    </li>
  {{/each}}
</ol>

<ol class='items-list'>
  <li class='item flexrow items-header'>
    <div class='item-name'>{{localize 'Folk Abilities'}}&nbsp<i class='toggle-icon fas fa-chevron-down'></i></div>
    <div class='item-folk-uses'>{{localize 'Uses'}}</div>
    <div class='item-controls'>
      <a
        class='item-control item-create'
        title='Create item'
        data-type='racial'
      >
        <i class='fas fa-plus'></i>
        {{localize 'DOCUMENT.New' type=''}}
      </a>
    </div>
  </li>
  {{#each racials as |item id|}}
    <li class='item flexrow' data-item-id='{{item._id}}'>
      <div class='item-name'>
        <div class='item-image'>
          <a class='rollable' data-roll-type='item'>
            <img
              src='{{item.img}}'
              title='{{item.name}}'
              width='24'
              height='24'
            />
          </a>
        </div>
        <h4>{{item.name}}</h4>
      </div>
      <div class='item-folk-uses item-prop'>
        {{#if (gt item.system.cooldown_value 0)}}
          <div class='uses-container'>
            <button type='button' class='uses-reset-btn' data-item-id='{{item._id}}' title='Reset to maximum uses'>
              <i class='fas fa-redo'></i>
            </button>
            <input type='number' 
                   class='uses-current' 
                   value='{{#if (ne item.system.uses_current undefined)}}{{item.system.uses_current}}{{else}}{{item.system.cooldown_value}}{{/if}}' 
                   data-item-id='{{item._id}}'
                   data-field='uses_current' />
            <span class='uses-separator'>/</span>
            <span class='uses-max'>{{item.system.cooldown_value}}</span>
          </div>
        {{/if}}
      </div>
      <div class='item-controls'>
        <a
          class='item-control item-duplicate'
          title='{{localize "STRYDER.DOCUMENT.Duplicate"}}'
        >
          <i class='fas fa-copy'></i>
        </a>
        <a
          class='item-control item-edit'
          title='{{localize "DOCUMENT.Edit" type='racial'}}'
        >
          <i class='fas fa-edit'></i>
        </a>
        <a
          class='item-control item-delete'
          title='{{localize "DOCUMENT.Delete" type='racial'}}'
        >
          <i class='fas fa-trash'></i>
        </a>
      </div>
    </li>
  {{/each}}
</ol>

<ol class='items-list'>
  <li class='item flexrow items-header'>
    <div class='item-name'>{{localize 'Techniques'}}&nbsp<i class='toggle-icon fas fa-chevron-down'></i></div>
    <div class='item-controls'>
      <a
        class='item-control item-create'
        title='Create item'
        data-type='technique'
      >
        <i class='fas fa-plus'></i>
        {{localize 'DOCUMENT.New' type=''}}
      </a>
    </div>
  </li>
  {{#each techniques as |item id|}}
    <li class='item flexrow' data-item-id='{{item._id}}'>
      <div class='item-name'>
        <div class='item-image'>
          <a class='rollable' data-roll-type='item'>
            <img
              src='{{item.img}}'
              title='{{item.name}}'
              width='24'
              height='24'
            />
          </a>
        </div>
        <h4>{{item.name}}</h4>
      </div>
      <div class='item-controls'>
        <a
          class='item-control item-duplicate'
          title='{{localize "STRYDER.DOCUMENT.Duplicate"}}'
        >
          <i class='fas fa-copy'></i>
        </a>
        <a
          class='item-control item-edit'
          title='{{localize "DOCUMENT.Edit" type='feature'}}'
        >
          <i class='fas fa-edit'></i>
        </a>
        <a
          class='item-control item-delete'
          title='{{localize "DOCUMENT.Delete" type='feature'}}'
        >
          <i class='fas fa-trash'></i>
        </a>
      </div>
    </li>
  {{/each}}
</ol>

